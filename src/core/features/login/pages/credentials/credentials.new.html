<ion-content class="ion-padding limited-width">
    <core-loading [hideUntil]="pageLoaded">
        <div id="outer-wrapper" class="base-background" style="position: fixed; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow-y: auto;">
            <div id="fake-bubble" style="height: max(calc((100vh - max(min(calc(100vh - 40px * 2), 800px), 650px)) / 2), 0px)"></div>
            <div id="wrapper" class="pl-cs pt-cs pr-cs pb-cs" style="display: flex; flex-direction: column; justify-content: space-between; height: calc(100vh - 40px * 2); min-height: 650px; max-height: 800px;">
                <div class="ion-text-wrap ion-text-center ion-margin-bottom">
                    <div class="core-login-site-logo" style="width: 140px; height: 140px; margin: 0px auto;">
                        <img class="neumorphism-shadow" src="assets/img/login/login_logo.png" role="presentation" alt="" style="border: 8px solid white; border-radius: 48px;">
                    </div>

                    <h5 *ngIf="siteName" class="text-center" style="margin: 24px 0px 0px;">{{ siteName }}</h5>
                </div>

                <form [formGroup]="credForm" (ngSubmit)="login($event)" class="core-login-form" #credentialsForm>
                    <div *ngIf="!siteCheckError && !isBrowserSSO" class="login-inset-field">
                        <ion-input type="text" name="username" placeholder="{{ 'core.login.username' | translate }}" formControlName="username" autocapitalize="none" autocorrect="off" autocomplete="username" enterkeyhint="next" required="true" />
                    </div>

                    <div *ngIf="!siteCheckError && !isBrowserSSO" class="login-inset-field mt-cst">
                        <ion-input name="password" type="password" placeholder="{{ 'core.login.password' | translate }}" formControlName="password" [clearOnEdit]="false" autocomplete="current-password" enterkeyhint="go" required="true">
                            <core-show-password slot="end" />
                        </ion-input>
                    </div>

                    <button class="mt-cst" type="submit" [disabled]="!siteCheckError && !isBrowserSSO && !credForm?.valid" style="width: 100%; font-size: 14px; padding: 0px; display: flex; justify-content: center; align-items: center;">
                        {{ 'core.login.loginbutton' | translate }}
                    </button>
                </form>

                <core-login-methods *ngIf="siteConfig" [siteConfig]="siteConfig" [siteUrl]="site.siteUrl" />

                <!-- Forgotten password option. -->
                <div *ngIf="showForgottenPassword">
                    <h6 class="text-center">{{ 'core.login.forgotten' | translate }}</h6>
                    <button expand="block" fill="clear" class="core-login-forgotten-password core-button-as-link ion-text-wrap" (click)="forgottenPassword()" style="width: 100%; font-size: 14px; display: flex; justify-content: center; align-items: center;">
                        Reset
                    </button>
                </div>
            </div>
        </div>
    </core-loading>
</ion-content>
