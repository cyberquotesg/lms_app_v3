<ion-header>
    <cq_header [title]="'Available Courses'" [displayMenu]="true" [displayNotification]="true" [displayUserMenu]="true" [displayProgress]="pageIsLoading"></cq_header>
</ion-header>

<ion-content class="cq_available_courses">
    <ion-refresher slot="fixed" [disabled]="!pageStatus" (ionRefresh)="pageRefresh($event.target)">
        <ion-refresher-content pullingText="{{ 'core.pulltorefresh' | translate }}"></ion-refresher-content>
    </ion-refresher>

    <core-loading [hideUntil]="pageStatus">
        <div class="base-background pb-5">

        <div class="text-center pt-36 ml-cs mr-cs d-flex justify-between">
            <button *ngFor="let media of pageData.medias" class="{{ media == pageData.media ? 'active' : '' }}" (click)="selectMedia(media)" style="width: calc(50% - 12px)">
                <span *ngIf="media == 'online'">E-Learning</span>
                <span *ngIf="media == 'offline'">Classroom Training</span>
            </button>
        </div>

        <ion-slides #pageSlider class="page-slider page-slider-cqac" [options]="pageData.sliderOptions" (ionSlideDidChange)="pageSliderChange()" style="transition: height ease 0.2s; min-height: calc(100vh - 50px - 80px - 48px);">
            <ion-slide *ngFor="let media of pageData.medias">
                <div class="text-left ml-20 mr-20 pt-36 pb-36" style="width: 100%">
                    <cq_filter [filterMultipleTitle]="media == 'online' ? 'E-Learning Filter' : 'Classroom Training Filter'" [filterMultiple]="pageData[media].filterMultiple" (onFilterChange)="onFilterChange($event)"></cq_filter>
                    <cq_items [items]="pageData[media].courses" (onSelectItem)="openCourse($event)"></cq_items>
                    
                    <button *ngIf="isAvailable(pageData[media].courses)" class="load-more-button {{ pageIsLoading ? 'loading' : '' }}" (click)="pageForceLoadMore()" [disabled]="pageData[media].reachedEndOfList">
                        <ion-icon *ngIf="!pageIsLoading" name="arrow-down-circle"></ion-icon>
                        <ion-spinner *ngIf="pageIsLoading"></ion-spinner>
                    </button>
                </div>
            </ion-slide>
        </ion-slides>

        </div>
    </core-loading>
</ion-content>
